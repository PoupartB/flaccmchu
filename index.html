<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FLACC (modifiée) — Évaluation de la douleur</title>
  <style>
    :root { --gap: 12px; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background:#f6f7f9; color:#111; }
    header { padding: 18px 16px; background: #fff; border-bottom: 1px solid #e5e7eb; position: sticky; top: 0; z-index: 10; }
    h1 { font-size: 18px; margin: 0 0 6px 0; }
    .sub { font-size: 13px; color:#444; margin:0; }
    main { max-width: 980px; margin: 0 auto; padding: 16px; display: grid; gap: var(--gap); }
    .card { background:#fff; border:1px solid #e5e7eb; border-radius: 12px; padding: 14px; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
    .row { display:flex; gap: var(--gap); flex-wrap: wrap; align-items: end; }
    label { font-size: 12px; color:#333; display:block; margin-bottom: 6px; }
    input[type="datetime-local"], input[type="text"] { width: 260px; max-width: 100%; padding: 10px; border:1px solid #d1d5db; border-radius: 10px; }
    textarea { width: 100%; min-height: 90px; padding: 10px; border:1px solid #d1d5db; border-radius: 10px; resize: vertical; }
    .grid { display:grid; grid-template-columns: 1fr; gap: var(--gap); }
    @media (min-width: 900px) { .grid { grid-template-columns: 1fr 1fr; } }

    .crit-title { display:flex; justify-content: space-between; align-items: baseline; gap: 8px; margin-bottom: 10px; }
    .crit-title h2 { font-size: 16px; margin:0; }
    .badge { font-size: 12px; padding: 4px 8px; border-radius: 999px; border: 1px solid #e5e7eb; background:#fafafa; }
    .opts { display:grid; gap: 8px; }
    .opt { border:1px solid #e5e7eb; border-radius: 12px; padding: 10px; display:flex; gap: 10px; align-items: flex-start; }
    .opt:hover { background:#fafafa; }
    .opt input { margin-top: 3px; }
    .opt strong { display:block; font-size: 13px; margin-bottom: 2px; }
    .opt span { display:block; font-size: 13px; color:#333; }

    .scorebar { display:flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .score { font-size: 28px; font-weight: 800; letter-spacing: .5px; }
    .interp { font-size: 13px; color:#111; padding: 6px 10px; border-radius: 999px; border: 1px solid #e5e7eb; background:#fafafa; }
    .hint { font-size: 12px; color:#555; margin-top: 6px; }
    details summary { cursor: pointer; font-weight: 600; }
    details { border:1px dashed #d1d5db; border-radius: 12px; padding: 10px; background:#fcfcfd; }
    .btns { display:flex; gap: 10px; flex-wrap: wrap; }
    button { border:1px solid #d1d5db; background:#fff; padding: 10px 12px; border-radius: 10px; cursor:pointer; }
    button.primary { border-color:#111; background:#111; color:#fff; }
    button:hover { filter: brightness(0.98); }
    .small { font-size: 12px; color:#555; }
    .footer { text-align:center; padding: 10px; color:#666; font-size: 12px; }
    @media print {
      header { position: static; }
      button { display:none; }
      body { background:#fff; }
      .card { box-shadow:none; }
      details[open] { border-style: solid; }
    }
  </style>
</head>

<body>
<header>
  <h1>Échelle FLACC (modifiée) — Face • Legs • Activity • Cry/Vocalisations • Consolability</h1>
  <p class="sub">Chaque item est coté de 0 à 2 → score total 0 à 10. À adapter au comportement de base de l’enfant.</p>
</header>

<main>
  <section class="card">
    <div class="row">
      <div>
        <label for="dt">Date / heure</label>
        <input id="dt" type="datetime-local" />
      </div>
      <div>
        <label for="patient">Patient (optionnel)</label>
        <input id="patient" type="text" placeholder="Initiales / ID" />
      </div>
      <div style="flex:1 1 auto"></div>
      <div class="scorebar">
        <div class="score" id="scoreTxt">0/10</div>
        <div class="interp" id="interpTxt">0 = détendu / confortable</div>
      </div>
    </div>

    <details style="margin-top: 12px;">
      <summary>Instructions d’observation (rappel)</summary>
      <div class="small" style="margin-top:10px; line-height:1.35;">
        <p><strong>Patient éveillé :</strong> observer 2 à 5 minutes. Jambes et corps découverts. Repositionner / observer la motricité, rigidité et tonus. Consoler si nécessaire.</p>
        <p><strong>Patient endormi :</strong> observer ≥ 5 minutes. Jambes et corps découverts. Repositionner si possible. Toucher le corps et évaluer rigidité / tonus.</p>
        <p><strong>Bon réflexe :</strong> associer à une auto-évaluation quand c’est possible. Sinon, interpréter selon le contexte clinique.</p>
      </div>
    </details>

    <div class="btns" style="margin-top: 12px;">
      <button class="primary" id="btnPrint" type="button">Imprimer</button>
      <button id="btnReset" type="button">Réinitialiser</button>
    </div>
    <div class="hint">Astuce : clique un item (0/1/2) pour chaque critère. Le score se met à jour automatiquement.</div>
  </section>

  <section class="grid">
    <!-- VISAGE -->
    <div class="card" data-crit="visage">
      <div class="crit-title">
        <h2>Visage</h2>
        <span class="badge">0–2</span>
      </div>
      <div class="opts">
        <label class="opt">
          <input type="radio" name="visage" value="0" />
          <div>
            <strong>0</strong>
            <span>Visage détendu / sourire, contact visuel, intérêt pour l’environnement.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="visage" value="1" />
          <div>
            <strong>1</strong>
            <span>Grimace / sourcils froncés occasionnels, expression anxieuse, yeux mi-clos, bouche pincée.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="visage" value="2" />
          <div>
            <strong>2</strong>
            <span>Front très crispé, yeux fermés, mâchoires serrées ou bouche ouverte, sillons naso-labiaux marqués.</span>
          </div>
        </label>
      </div>
    </div>

    <!-- JAMBES -->
    <div class="card" data-crit="jambes">
      <div class="crit-title">
        <h2>Jambes</h2>
        <span class="badge">0–2</span>
      </div>
      <div class="opts">
        <label class="opt">
          <input type="radio" name="jambes" value="0" />
          <div>
            <strong>0</strong>
            <span>Motricité et tonus habituels (jambes et bras), position détendue.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="jambes" value="1" />
          <div>
            <strong>1</strong>
            <span>Tonus augmenté / rigidité / tension, mouvements intermittents de flexion-extension.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="jambes" value="2" />
          <div>
            <strong>2</strong>
            <span>Hypertonicité, jambes raides, flexion-extension exagérée, trémulations / coups de pieds.</span>
          </div>
        </label>
      </div>
    </div>

    <!-- ACTIVITÉ -->
    <div class="card" data-crit="activite">
      <div class="crit-title">
        <h2>Activité</h2>
        <span class="badge">0–2</span>
      </div>
      <div class="opts">
        <label class="opt">
          <input type="radio" name="activite" value="0" />
          <div>
            <strong>0</strong>
            <span>Se mobilise facilement, activité motrice habituelle, calme en position habituelle.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="activite" value="1" />
          <div>
            <strong>1</strong>
            <span>Change souvent de position ou hésite à bouger, torse raide, partie du corps tendue.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="activite" value="2" />
          <div>
            <strong>2</strong>
            <span>Figé ou agitation importante (balancements, tête de part et d’autre, frottements répétitifs).</span>
          </div>
        </label>
      </div>
    </div>

    <!-- CRIS / VOCALISATIONS -->
    <div class="card" data-crit="cris">
      <div class="crit-title">
        <h2>Cris / Vocalisations</h2>
        <span class="badge">0–2</span>
      </div>
      <div class="opts">
        <label class="opt">
          <input type="radio" name="cris" value="0" />
          <div>
            <strong>0</strong>
            <span>Aucun cri ou gémissement (éveillé ou endormi) / vocalisations habituelles.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="cris" value="1" />
          <div>
            <strong>1</strong>
            <span>Gémissements / plaintes / pleurs occasionnels, soupirs, changement discret de vocalisation.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="cris" value="2" />
          <div>
            <strong>2</strong>
            <span>Pleurs / cris fréquents ou continus, hurlements, sanglots, vocalisations inhabituelles.</span>
          </div>
        </label>
      </div>
    </div>

    <!-- CONSOLABILITÉ -->
    <div class="card" data-crit="consolabilite">
      <div class="crit-title">
        <h2>Consolabilité</h2>
        <span class="badge">0–2</span>
      </div>
      <div class="opts">
        <label class="opt">
          <input type="radio" name="consolabilite" value="0" />
          <div>
            <strong>0</strong>
            <span>Calme, détendu, n’a pas besoin d’être consolé.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="consolabilite" value="1" />
          <div>
            <strong>1</strong>
            <span>Rassuré par toucher / étreinte / parole en 30–60 secondes, peut être distrait.</span>
          </div>
        </label>
        <label class="opt">
          <input type="radio" name="consolabilite" value="2" />
          <div>
            <strong>2</strong>
            <span>Besoin de réconfort en permanence ou inconsolable / très difficile à apaiser.</span>
          </div>
        </label>
      </div>
    </div>

    <!-- OBSERVATIONS -->
    <div class="card">
      <div class="crit-title">
        <h2>Observations</h2>
        <span class="badge">libre</span>
      </div>
      <label for="obs" class="small">Contexte, soins en cours, comportement de base, localisation supposée, traitement donné, etc.</label>
      <textarea id="obs" placeholder="Ex: post-op J0, agitation au changement de position, calmé au contact, etc."></textarea>
    </div>
  </section>

  <div class="footer">
    FLACC (modifiée) — score comportemental. Adapter à l’enfant et au contexte clinique.
  </div>
</main>

<script>
  // Init date/heure à maintenant
  (function initDateTime() {
    const dt = document.getElementById('dt');
    const now = new Date();
    const pad = (n) => String(n).padStart(2, '0');
    const val = `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}T${pad(now.getHours())}:${pad(now.getMinutes())}`;
    dt.value = val;
  })();

  const crits = ["visage","jambes","activite","cris","consolabilite"];

  function getScore() {
    let total = 0;
    for (const c of crits) {
      const sel = document.querySelector(`input[name="${c}"]:checked`);
      total += sel ? Number(sel.value) : 0;
    }
    return total;
  }

  function interpretation(score) {
    if (score === 0) return "0 = détendu / confortable";
    if (score >= 1 && score <= 3) return "1–3 = léger inconfort";
    if (score >= 4 && score <= 6) return "4–6 = douleur modérée";
    return "7–10 = douleur sévère / inconfort majeur";
  }

  function render() {
    const s = getScore();
    document.getElementById('scoreTxt').textContent = `${s}/10`;
    document.getElementById('interpTxt').textContent = interpretation(s);
  }

  document.addEventListener('change', (e) => {
    if (e.target && e.target.matches('input[type="radio"]')) render();
  });

  document.getElementById('btnReset').addEventListener('click', () => {
    document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
    document.getElementById('obs').value = "";
    render();
  });

  document.getElementById('btnPrint').addEventListener('click', () => window.print());

  render();
</script>
</body>
</html>
